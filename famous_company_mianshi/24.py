# 给出一个仅包含字符'('和')'的字符串，计算最长的格式正确的括号子串的长度。
# 对于字符串"(()"来说，最长的格式正确的子串是"()"，长度为2.
# 再举一个例子：对于字符串")()())",来说，最长的格式正确的子串是"()()"，长度为4.


class Solution:
    def longestValidParentheses(self , s ):
        stack = [-1]
        res = 0
        for i, ele in enumerate(s):
            if s[i] == '(':
                stack.append(i)
            elif len(stack) > 1:
                stack.pop()
                res = max(res, i - stack[-1])
            else:
                stack[0] = i
        return res


if __name__ == '__main__':
    s = Solution()
    # ss = "))())(()))()(((()())(()(((()))))((()(())()((((()))())))())))()(()(()))))())(((())(()()))((())()())((()))(()(())(())((())((((()())()))((()(())()))()(()))))))()))(()))))()())()())()()()()()()()))()(((()()((()(())((()())))(()())))))))(()()(())())(()))))))()()())((((()()()())))))((())(())()()(()((()()))()()())(()())()))()(()(()())))))())()(())(()))(())()(())()((())()((((()()))())(((((())))())())(()((())((()()((((((())))(((())))))))(()()((((((()(((())()(()))(()())((()(((()((()(())())()())(((()))()(((()))))(())))(())()())()(((()))))((())())))())()()))((((()))(())()())()(((())(())(()()((())()())()()())())))((()())(()((()()()(()())(()))(()())((((()(()(((()(((())()((()(()))())()())))))))))))()())()(()(((())()))(((()))((((()())())(()())((()())(()()((()((((()())))()(())(())()))))(())())))))(((((((())(((((()))()))(()()()()))))))(()(()(()(()()(((()()))((()))())((())())()())()))()()(((())))()(())()()(())))(((()))))))))(())((()((()((()))))()()()((())((((((((((()(())))(())((()(()())())(((((((()()()()))())(((()())()(()()))))(()()))))(((()()((()()()(((()))))(()()())()()()(()))))()(())))))))()((((((((()((())))))))(()))()((()())())("
    ss = "()(((()())(()(((()))))"
    print(s.longestValidParentheses(ss))